var background=function(){"use strict";var gt,bt,Et,St;function Tt(t){return t==null||typeof t=="function"?{main:t}:t}const P=(bt=(gt=globalThis.browser)==null?void 0:gt.runtime)!=null&&bt.id?globalThis.browser:globalThis.chrome,Ot=async()=>{const t={timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,browser_language:navigator.language};await fe("/user/add",t)};function Ce(t,e){return function(){return t.apply(e,arguments)}}const{toString:xt}=Object.prototype,{getPrototypeOf:he}=Object,{iterator:G,toStringTag:ke}=Symbol,Q=(t=>e=>{const n=xt.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),L=t=>(t=t.toLowerCase(),e=>Q(e)===t),Z=t=>e=>typeof e===t,{isArray:q}=Array,K=Z("undefined");function At(t){return t!==null&&!K(t)&&t.constructor!==null&&!K(t.constructor)&&N(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ne=L("ArrayBuffer");function vt(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ne(t.buffer),e}const Ct=Z("string"),N=Z("function"),Ie=Z("number"),Y=t=>t!==null&&typeof t=="object",kt=t=>t===!0||t===!1,ee=t=>{if(Q(t)!=="object")return!1;const e=he(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ke in t)&&!(G in t)},Nt=L("Date"),It=L("File"),Pt=L("Blob"),Lt=L("FileList"),Ft=t=>Y(t)&&N(t.pipe),Ut=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||N(t.append)&&((e=Q(t))==="formdata"||e==="object"&&N(t.toString)&&t.toString()==="[object FormData]"))},Dt=L("URLSearchParams"),[Mt,jt,qt,Bt]=["ReadableStream","Request","Response","Headers"].map(L),$t=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function z(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),q(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,t[c],c,t)}}function Pe(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const U=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Le=t=>!K(t)&&t!==U;function me(){const{caseless:t}=Le(this)&&this||{},e={},n=(r,s)=>{const i=t&&Pe(e,s)||s;ee(e[i])&&ee(r)?e[i]=me(e[i],r):ee(r)?e[i]=me({},r):q(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&z(arguments[r],n);return e}const Vt=(t,e,n,{allOwnKeys:r}={})=>(z(e,(s,i)=>{n&&N(s)?t[i]=Ce(s,n):t[i]=s},{allOwnKeys:r}),t),Ht=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Kt=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},zt=(t,e,n,r)=>{let s,i,o;const c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&he(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Wt=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Jt=t=>{if(!t)return null;if(q(t))return t;let e=t.length;if(!Ie(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Xt=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&he(Uint8Array)),Gt=(t,e)=>{const r=(t&&t[G]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Qt=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Zt=L("HTMLFormElement"),Yt=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Fe=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),en=L("RegExp"),Ue=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};z(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},tn=t=>{Ue(t,(e,n)=>{if(N(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(N(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nn=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return q(t)?r(t):r(String(t).split(e)),n},rn=()=>{},sn=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function on(t){return!!(t&&N(t.append)&&t[ke]==="FormData"&&t[G])}const an=t=>{const e=new Array(10),n=(r,s)=>{if(Y(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=q(r)?[]:{};return z(r,(o,c)=>{const p=n(o,s+1);!K(p)&&(i[c]=p)}),e[s]=void 0,i}}return r};return n(t,0)},cn=L("AsyncFunction"),ln=t=>t&&(Y(t)||N(t))&&N(t.then)&&N(t.catch),De=((t,e)=>t?setImmediate:e?((n,r)=>(U.addEventListener("message",({source:s,data:i})=>{s===U&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),U.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",N(U.postMessage)),un=typeof queueMicrotask<"u"?queueMicrotask.bind(U):typeof process<"u"&&process.nextTick||De,l={isArray:q,isArrayBuffer:Ne,isBuffer:At,isFormData:Ut,isArrayBufferView:vt,isString:Ct,isNumber:Ie,isBoolean:kt,isObject:Y,isPlainObject:ee,isReadableStream:Mt,isRequest:jt,isResponse:qt,isHeaders:Bt,isUndefined:K,isDate:Nt,isFile:It,isBlob:Pt,isRegExp:en,isFunction:N,isStream:Ft,isURLSearchParams:Dt,isTypedArray:Xt,isFileList:Lt,forEach:z,merge:me,extend:Vt,trim:$t,stripBOM:Ht,inherits:Kt,toFlatObject:zt,kindOf:Q,kindOfTest:L,endsWith:Wt,toArray:Jt,forEachEntry:Gt,matchAll:Qt,isHTMLForm:Zt,hasOwnProperty:Fe,hasOwnProp:Fe,reduceDescriptors:Ue,freezeMethods:tn,toObjectSet:nn,toCamelCase:Yt,noop:rn,toFiniteNumber:sn,findKey:Pe,global:U,isContextDefined:Le,isSpecCompliantForm:on,toJSONObject:an,isAsyncFn:cn,isThenable:ln,setImmediate:De,asap:un,isIterable:t=>t!=null&&N(t[G])};function E(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}l.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const Me=E.prototype,je={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{je[t]={value:t}}),Object.defineProperties(E,je),Object.defineProperty(Me,"isAxiosError",{value:!0}),E.from=(t,e,n,r,s,i)=>{const o=Object.create(Me);return l.toFlatObject(t,o,function(p){return p!==Error.prototype},c=>c!=="isAxiosError"),E.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const fn=null;function pe(t){return l.isPlainObject(t)||l.isArray(t)}function qe(t){return l.endsWith(t,"[]")?t.slice(0,-2):t}function Be(t,e,n){return t?t.concat(e).map(function(s,i){return s=qe(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function dn(t){return l.isArray(t)&&!t.some(pe)}const hn=l.toFlatObject(l,{},null,function(e){return/^is[A-Z]/.test(e)});function te(t,e,n){if(!l.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=l.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,a){return!l.isUndefined(a[f])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(e);if(!l.isFunction(s))throw new TypeError("visitor must be a function");function m(g){if(g===null)return"";if(l.isDate(g))return g.toISOString();if(!p&&l.isBlob(g))throw new E("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(g)||l.isTypedArray(g)?p&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,f,a){let d=g;if(g&&!a&&typeof g=="object"){if(l.endsWith(f,"{}"))f=r?f:f.slice(0,-2),g=JSON.stringify(g);else if(l.isArray(g)&&dn(g)||(l.isFileList(g)||l.endsWith(f,"[]"))&&(d=l.toArray(g)))return f=qe(f),d.forEach(function(w,b){!(l.isUndefined(w)||w===null)&&e.append(o===!0?Be([f],b,i):o===null?f:f+"[]",m(w))}),!1}return pe(g)?!0:(e.append(Be(a,f,i),m(g)),!1)}const y=[],_=Object.assign(hn,{defaultVisitor:u,convertValue:m,isVisitable:pe});function T(g,f){if(!l.isUndefined(g)){if(y.indexOf(g)!==-1)throw Error("Circular reference detected in "+f.join("."));y.push(g),l.forEach(g,function(d,h){(!(l.isUndefined(d)||d===null)&&s.call(e,d,l.isString(h)?h.trim():h,f,_))===!0&&T(d,f?f.concat(h):[h])}),y.pop()}}if(!l.isObject(t))throw new TypeError("data must be an object");return T(t),e}function $e(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function we(t,e){this._pairs=[],t&&te(t,this,e)}const Ve=we.prototype;Ve.append=function(e,n){this._pairs.push([e,n])},Ve.toString=function(e){const n=e?function(r){return e.call(this,r,$e)}:$e;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function mn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function He(t,e,n){if(!e)return t;const r=n&&n.encode||mn;l.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=l.isURLSearchParams(e)?e.toString():new we(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Ke{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){l.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ze={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pn={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:we,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},ye=typeof window<"u"&&typeof document<"u",ge=typeof navigator=="object"&&navigator||void 0,wn=ye&&(!ge||["ReactNative","NativeScript","NS"].indexOf(ge.product)<0),yn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gn=ye&&window.location.href||"http://localhost",k={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ye,hasStandardBrowserEnv:wn,hasStandardBrowserWebWorkerEnv:yn,navigator:ge,origin:gn},Symbol.toStringTag,{value:"Module"})),...pn};function bn(t,e){return te(t,new k.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return k.isNode&&l.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function En(t){return l.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Sn(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function We(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),p=i>=n.length;return o=!o&&l.isArray(s)?s.length:o,p?(l.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!c):((!s[o]||!l.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&l.isArray(s[o])&&(s[o]=Sn(s[o])),!c)}if(l.isFormData(t)&&l.isFunction(t.entries)){const n={};return l.forEachEntry(t,(r,s)=>{e(En(r),s,n,0)}),n}return null}function Rn(t,e,n){if(l.isString(t))try{return(e||JSON.parse)(t),l.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const W={transitional:ze,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=l.isObject(e);if(i&&l.isHTMLForm(e)&&(e=new FormData(e)),l.isFormData(e))return s?JSON.stringify(We(e)):e;if(l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e)||l.isReadableStream(e))return e;if(l.isArrayBufferView(e))return e.buffer;if(l.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return bn(e,this.formSerializer).toString();if((c=l.isFileList(e))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return te(c?{"files[]":e}:e,p&&new p,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Rn(e)):e}],transformResponse:[function(e){const n=this.transitional||W.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(l.isResponse(e)||l.isReadableStream(e))return e;if(e&&l.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?E.from(c,E.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:k.classes.FormData,Blob:k.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],t=>{W.headers[t]={}});const _n=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tn=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&_n[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Je=Symbol("internals");function J(t){return t&&String(t).trim().toLowerCase()}function ne(t){return t===!1||t==null?t:l.isArray(t)?t.map(ne):String(t)}function On(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const xn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function be(t,e,n,r,s){if(l.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!l.isString(e)){if(l.isString(r))return e.indexOf(r)!==-1;if(l.isRegExp(r))return r.test(e)}}function An(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function vn(t,e){const n=l.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let I=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(c,p,m){const u=J(p);if(!u)throw new Error("header name must be a non-empty string");const y=l.findKey(s,u);(!y||s[y]===void 0||m===!0||m===void 0&&s[y]!==!1)&&(s[y||p]=ne(c))}const o=(c,p)=>l.forEach(c,(m,u)=>i(m,u,p));if(l.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(l.isString(e)&&(e=e.trim())&&!xn(e))o(Tn(e),n);else if(l.isObject(e)&&l.isIterable(e)){let c={},p,m;for(const u of e){if(!l.isArray(u))throw TypeError("Object iterator must return a key-value pair");c[m=u[0]]=(p=c[m])?l.isArray(p)?[...p,u[1]]:[p,u[1]]:u[1]}o(c,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=J(e),e){const r=l.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return On(s);if(l.isFunction(n))return n.call(this,s,r);if(l.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=J(e),e){const r=l.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||be(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=J(o),o){const c=l.findKey(r,o);c&&(!n||be(r,r[c],c,n))&&(delete r[c],s=!0)}}return l.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||be(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return l.forEach(this,(s,i)=>{const o=l.findKey(r,i);if(o){n[o]=ne(s),delete n[i];return}const c=e?An(i):String(i).trim();c!==i&&delete n[i],n[c]=ne(s),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return l.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&l.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Je]=this[Je]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=J(o);r[c]||(vn(s,o),r[c]=!0)}return l.isArray(e)?e.forEach(i):i(e),this}};I.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),l.reduceDescriptors(I.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}}),l.freezeMethods(I);function Ee(t,e){const n=this||W,r=e||n,s=I.from(r.headers);let i=r.data;return l.forEach(t,function(c){i=c.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Xe(t){return!!(t&&t.__CANCEL__)}function B(t,e,n){E.call(this,t??"canceled",E.ERR_CANCELED,e,n),this.name="CanceledError"}l.inherits(B,E,{__CANCEL__:!0});function Ge(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new E("Request failed with status code "+n.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Cn(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kn(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(p){const m=Date.now(),u=r[i];o||(o=m),n[s]=p,r[s]=m;let y=i,_=0;for(;y!==s;)_+=n[y++],y=y%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),m-o<e)return;const T=u&&m-u;return T?Math.round(_*1e3/T):void 0}}function Nn(t,e){let n=0,r=1e3/e,s,i;const o=(m,u=Date.now())=>{n=u,s=null,i&&(clearTimeout(i),i=null),t.apply(null,m)};return[(...m)=>{const u=Date.now(),y=u-n;y>=r?o(m,u):(s=m,i||(i=setTimeout(()=>{i=null,o(s)},r-y)))},()=>s&&o(s)]}const re=(t,e,n=3)=>{let r=0;const s=kn(50,250);return Nn(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,p=o-r,m=s(p),u=o<=c;r=o;const y={loaded:o,total:c,progress:c?o/c:void 0,bytes:p,rate:m||void 0,estimated:m&&c&&u?(c-o)/m:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(y)},n)},Qe=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Ze=t=>(...e)=>l.asap(()=>t(...e)),In=k.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,k.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(k.origin),k.navigator&&/(msie|trident)/i.test(k.navigator.userAgent)):()=>!0,Pn=k.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];l.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),l.isString(r)&&o.push("path="+r),l.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ln(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Fn(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ye(t,e,n){let r=!Ln(e);return t&&(r||n==!1)?Fn(t,e):e}const et=t=>t instanceof I?{...t}:t;function D(t,e){e=e||{};const n={};function r(m,u,y,_){return l.isPlainObject(m)&&l.isPlainObject(u)?l.merge.call({caseless:_},m,u):l.isPlainObject(u)?l.merge({},u):l.isArray(u)?u.slice():u}function s(m,u,y,_){if(l.isUndefined(u)){if(!l.isUndefined(m))return r(void 0,m,y,_)}else return r(m,u,y,_)}function i(m,u){if(!l.isUndefined(u))return r(void 0,u)}function o(m,u){if(l.isUndefined(u)){if(!l.isUndefined(m))return r(void 0,m)}else return r(void 0,u)}function c(m,u,y){if(y in e)return r(m,u);if(y in t)return r(void 0,m)}const p={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(m,u,y)=>s(et(m),et(u),y,!0)};return l.forEach(Object.keys(Object.assign({},t,e)),function(u){const y=p[u]||s,_=y(t[u],e[u],u);l.isUndefined(_)&&y!==c||(n[u]=_)}),n}const tt=t=>{const e=D({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=e;e.headers=o=I.from(o),e.url=He(Ye(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let p;if(l.isFormData(n)){if(k.hasStandardBrowserEnv||k.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((p=o.getContentType())!==!1){const[m,...u]=p?p.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...u].join("; "))}}if(k.hasStandardBrowserEnv&&(r&&l.isFunction(r)&&(r=r(e)),r||r!==!1&&In(e.url))){const m=s&&i&&Pn.read(i);m&&o.set(s,m)}return e},Un=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(n,r){const s=tt(t);let i=s.data;const o=I.from(s.headers).normalize();let{responseType:c,onUploadProgress:p,onDownloadProgress:m}=s,u,y,_,T,g;function f(){T&&T(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let a=new XMLHttpRequest;a.open(s.method.toUpperCase(),s.url,!0),a.timeout=s.timeout;function d(){if(!a)return;const w=I.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),S={data:!c||c==="text"||c==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:w,config:t,request:a};Ge(function(C){n(C),f()},function(C){r(C),f()},S),a=null}"onloadend"in a?a.onloadend=d:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(d)},a.onabort=function(){a&&(r(new E("Request aborted",E.ECONNABORTED,t,a)),a=null)},a.onerror=function(){r(new E("Network Error",E.ERR_NETWORK,t,a)),a=null},a.ontimeout=function(){let b=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||ze;s.timeoutErrorMessage&&(b=s.timeoutErrorMessage),r(new E(b,S.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,t,a)),a=null},i===void 0&&o.setContentType(null),"setRequestHeader"in a&&l.forEach(o.toJSON(),function(b,S){a.setRequestHeader(S,b)}),l.isUndefined(s.withCredentials)||(a.withCredentials=!!s.withCredentials),c&&c!=="json"&&(a.responseType=s.responseType),m&&([_,g]=re(m,!0),a.addEventListener("progress",_)),p&&a.upload&&([y,T]=re(p),a.upload.addEventListener("progress",y),a.upload.addEventListener("loadend",T)),(s.cancelToken||s.signal)&&(u=w=>{a&&(r(!w||w.type?new B(null,t,a):w),a.abort(),a=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const h=Cn(s.url);if(h&&k.protocols.indexOf(h)===-1){r(new E("Unsupported protocol "+h+":",E.ERR_BAD_REQUEST,t));return}a.send(i||null)})},Dn=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(m){if(!s){s=!0,c();const u=m instanceof Error?m:this.reason;r.abort(u instanceof E?u:new B(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new E(`timeout ${e} of ms exceeded`,E.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),t=null)};t.forEach(m=>m.addEventListener("abort",i));const{signal:p}=r;return p.unsubscribe=()=>l.asap(c),p}},Mn=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},jn=async function*(t,e){for await(const n of qn(t))yield*Mn(n,e)},qn=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},nt=(t,e,n,r)=>{const s=jn(t,e);let i=0,o,c=p=>{o||(o=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:m,value:u}=await s.next();if(m){c(),p.close();return}let y=u.byteLength;if(n){let _=i+=y;n(_)}p.enqueue(new Uint8Array(u))}catch(m){throw c(m),m}},cancel(p){return c(p),s.return()}},{highWaterMark:2})},se=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rt=se&&typeof ReadableStream=="function",Bn=se&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),st=(t,...e)=>{try{return!!t(...e)}catch{return!1}},$n=rt&&st(()=>{let t=!1;const e=new Request(k.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),it=64*1024,Se=rt&&st(()=>l.isReadableStream(new Response("").body)),ie={stream:Se&&(t=>t.body)};se&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ie[e]&&(ie[e]=l.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new E(`Response type '${e}' is not supported`,E.ERR_NOT_SUPPORT,r)})})})(new Response);const Vn=async t=>{if(t==null)return 0;if(l.isBlob(t))return t.size;if(l.isSpecCompliantForm(t))return(await new Request(k.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(l.isArrayBufferView(t)||l.isArrayBuffer(t))return t.byteLength;if(l.isURLSearchParams(t)&&(t=t+""),l.isString(t))return(await Bn(t)).byteLength},Hn=async(t,e)=>{const n=l.toFiniteNumber(t.getContentLength());return n??Vn(e)},Re={http:fn,xhr:Un,fetch:se&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:p,responseType:m,headers:u,withCredentials:y="same-origin",fetchOptions:_}=tt(t);m=m?(m+"").toLowerCase():"text";let T=Dn([s,i&&i.toAbortSignal()],o),g;const f=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let a;try{if(p&&$n&&n!=="get"&&n!=="head"&&(a=await Hn(u,r))!==0){let S=new Request(e,{method:"POST",body:r,duplex:"half"}),R;if(l.isFormData(r)&&(R=S.headers.get("content-type"))&&u.setContentType(R),S.body){const[C,A]=Qe(a,re(Ze(p)));r=nt(S.body,it,C,A)}}l.isString(y)||(y=y?"include":"omit");const d="credentials"in Request.prototype;g=new Request(e,{..._,signal:T,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:d?y:void 0});let h=await fetch(g);const w=Se&&(m==="stream"||m==="response");if(Se&&(c||w&&f)){const S={};["status","statusText","headers"].forEach(v=>{S[v]=h[v]});const R=l.toFiniteNumber(h.headers.get("content-length")),[C,A]=c&&Qe(R,re(Ze(c),!0))||[];h=new Response(nt(h.body,it,C,()=>{A&&A(),f&&f()}),S)}m=m||"text";let b=await ie[l.findKey(ie,m)||"text"](h,t);return!w&&f&&f(),await new Promise((S,R)=>{Ge(S,R,{data:b,headers:I.from(h.headers),status:h.status,statusText:h.statusText,config:t,request:g})})}catch(d){throw f&&f(),d&&d.name==="TypeError"&&/Load failed|fetch/i.test(d.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,t,g),{cause:d.cause||d}):E.from(d,d&&d.code,t,g)}})};l.forEach(Re,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ot=t=>`- ${t}`,Kn=t=>l.isFunction(t)||t===null||t===!1,at={getAdapter:t=>{t=l.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!Kn(n)&&(r=Re[(o=String(n)).toLowerCase()],r===void 0))throw new E(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([c,p])=>`adapter ${c} `+(p===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(ot).join(`
`):" "+ot(i[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Re};function _e(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new B(null,t)}function ct(t){return _e(t),t.headers=I.from(t.headers),t.data=Ee.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),at.getAdapter(t.adapter||W.adapter)(t).then(function(r){return _e(t),r.data=Ee.call(t,t.transformResponse,r),r.headers=I.from(r.headers),r},function(r){return Xe(r)||(_e(t),r&&r.response&&(r.response.data=Ee.call(t,t.transformResponse,r.response),r.response.headers=I.from(r.response.headers))),Promise.reject(r)})}const lt="1.9.0",oe={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oe[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ut={};oe.transitional=function(e,n,r){function s(i,o){return"[Axios v"+lt+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new E(s(o," has been removed"+(n?" in "+n:"")),E.ERR_DEPRECATED);return n&&!ut[o]&&(ut[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,c):!0}},oe.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function zn(t,e,n){if(typeof t!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const c=t[i],p=c===void 0||o(c,i,t);if(p!==!0)throw new E("option "+i+" must be "+p,E.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new E("Unknown option "+i,E.ERR_BAD_OPTION)}}const ae={assertOptions:zn,validators:oe},F=ae.validators;let M=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ke,response:new Ke}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=D(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ae.assertOptions(r,{silentJSONParsing:F.transitional(F.boolean),forcedJSONParsing:F.transitional(F.boolean),clarifyTimeoutError:F.transitional(F.boolean)},!1),s!=null&&(l.isFunction(s)?n.paramsSerializer={serialize:s}:ae.assertOptions(s,{encode:F.function,serialize:F.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ae.assertOptions(n,{baseUrl:F.spelling("baseURL"),withXsrfToken:F.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&l.merge(i.common,i[n.method]);i&&l.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=I.concat(o,i);const c=[];let p=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(p=p&&f.synchronous,c.unshift(f.fulfilled,f.rejected))});const m=[];this.interceptors.response.forEach(function(f){m.push(f.fulfilled,f.rejected)});let u,y=0,_;if(!p){const g=[ct.bind(this),void 0];for(g.unshift.apply(g,c),g.push.apply(g,m),_=g.length,u=Promise.resolve(n);y<_;)u=u.then(g[y++],g[y++]);return u}_=c.length;let T=n;for(y=0;y<_;){const g=c[y++],f=c[y++];try{T=g(T)}catch(a){f.call(this,a);break}}try{u=ct.call(this,T)}catch(g){return Promise.reject(g)}for(y=0,_=m.length;y<_;)u=u.then(m[y++],m[y++]);return u}getUri(e){e=D(this.defaults,e);const n=Ye(e.baseURL,e.url,e.allowAbsoluteUrls);return He(n,e.params,e.paramsSerializer)}};l.forEach(["delete","get","head","options"],function(e){M.prototype[e]=function(n,r){return this.request(D(r||{},{method:e,url:n,data:(r||{}).data}))}}),l.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,c){return this.request(D(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}M.prototype[e]=n(),M.prototype[e+"Form"]=n(!0)});let Wn=class _t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new B(i,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new _t(function(s){e=s}),cancel:e}}};function Jn(t){return function(n){return t.apply(null,n)}}function Xn(t){return l.isObject(t)&&t.isAxiosError===!0}const Te={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Te).forEach(([t,e])=>{Te[e]=t});function ft(t){const e=new M(t),n=Ce(M.prototype.request,e);return l.extend(n,M.prototype,e,{allOwnKeys:!0}),l.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ft(D(t,s))},n}const x=ft(W);x.Axios=M,x.CanceledError=B,x.CancelToken=Wn,x.isCancel=Xe,x.VERSION=lt,x.toFormData=te,x.AxiosError=E,x.Cancel=x.CanceledError,x.all=function(e){return Promise.all(e)},x.spread=Jn,x.isAxiosError=Xn,x.mergeConfig=D,x.AxiosHeaders=I,x.formToJSON=t=>We(l.isHTMLForm(t)?new FormData(t):t),x.getAdapter=at.getAdapter,x.HttpStatusCode=Te,x.default=x;const{Axios:br,AxiosError:Er,CanceledError:Sr,isCancel:Rr,CancelToken:_r,VERSION:Tr,all:Or,Cancel:xr,isAxiosError:Ar,spread:vr,toFormData:Cr,AxiosHeaders:kr,HttpStatusCode:Nr,formToJSON:Ir,getAdapter:Pr,mergeConfig:Lr}=x;var dt=Object.prototype.hasOwnProperty;function Oe(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Oe(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(dt.call(t,n)&&++r&&!dt.call(e,n)||!(n in e)||!Oe(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Gn=new Error("request for lock canceled");var Qn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{m(r.next(u))}catch(y){o(y)}}function p(u){try{m(r.throw(u))}catch(y){o(y)}}function m(u){u.done?i(u.value):s(u.value).then(c,p)}m((r=r.apply(t,e||[])).next())})};class Zn{constructor(e,n=Gn){this._value=e,this._cancelError=n,this._queue=[],this._weightedWaiters=[]}acquire(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,s)=>{const i={resolve:r,reject:s,weight:e,priority:n},o=ht(this._queue,c=>n<=c.priority);o===-1&&e<=this._value?this._dispatchItem(i):this._queue.splice(o+1,0,i)})}runExclusive(e){return Qn(this,arguments,void 0,function*(n,r=1,s=0){const[i,o]=yield this.acquire(r,s);try{return yield n(i)}finally{o()}})}waitForUnlock(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,n)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Yn(this._weightedWaiters[e-1],{resolve:r,priority:n})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const n=this._value;this._value-=e.weight,e.resolve([n,this._newReleaser(e.weight)])}_newReleaser(e){let n=!1;return()=>{n||(n=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const n=this._weightedWaiters[e-1];n&&(n.forEach(r=>r.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let n=this._value;n>0;n--){const r=this._weightedWaiters[n-1];if(!r)continue;const s=r.findIndex(i=>i.priority<=e);(s===-1?r:r.splice(0,s)).forEach(i=>i.resolve())}}}_couldLockImmediately(e,n){return(this._queue.length===0||this._queue[0].priority<n)&&e<=this._value}}function Yn(t,e){const n=ht(t,r=>e.priority<=r.priority);t.splice(n+1,0,e)}function ht(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n]))return n;return-1}var er=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(u){try{m(r.next(u))}catch(y){o(y)}}function p(u){try{m(r.throw(u))}catch(y){o(y)}}function m(u){u.done?i(u.value):s(u.value).then(c,p)}m((r=r.apply(t,e||[])).next())})};class tr{constructor(e){this._semaphore=new Zn(1,e)}acquire(){return er(this,arguments,void 0,function*(e=0){const[,n]=yield this._semaphore.acquire(1,e);return n})}runExclusive(e,n=0){return this._semaphore.runExclusive(()=>e(),1,n)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const ce=((St=(Et=globalThis.browser)==null?void 0:Et.runtime)==null?void 0:St.id)==null?globalThis.chrome:globalThis.browser,mt=nr();function nr(){const t={local:le("local"),session:le("session"),sync:le("sync"),managed:le("managed")},e=f=>{const a=t[f];if(a==null){const d=Object.keys(t).join(", ");throw Error(`Invalid area "${f}". Options: ${d}`)}return a},n=f=>{const a=f.indexOf(":"),d=f.substring(0,a),h=f.substring(a+1);if(h==null)throw Error(`Storage key should be in the form of "area:key", but received "${f}"`);return{driverArea:d,driverKey:h,driver:e(d)}},r=f=>f+"$",s=(f,a)=>{const d={...f};return Object.entries(a).forEach(([h,w])=>{w==null?delete d[h]:d[h]=w}),d},i=(f,a)=>f??a??null,o=f=>typeof f=="object"&&!Array.isArray(f)?f:{},c=async(f,a,d)=>{const h=await f.getItem(a);return i(h,(d==null?void 0:d.fallback)??(d==null?void 0:d.defaultValue))},p=async(f,a)=>{const d=r(a),h=await f.getItem(d);return o(h)},m=async(f,a,d)=>{await f.setItem(a,d??null)},u=async(f,a,d)=>{const h=r(a),w=o(await f.getItem(h));await f.setItem(h,s(w,d))},y=async(f,a,d)=>{if(await f.removeItem(a),d!=null&&d.removeMeta){const h=r(a);await f.removeItem(h)}},_=async(f,a,d)=>{const h=r(a);if(d==null)await f.removeItem(h);else{const w=o(await f.getItem(h));[d].flat().forEach(b=>delete w[b]),await f.setItem(h,w)}},T=(f,a,d)=>f.watch(a,d);return{getItem:async(f,a)=>{const{driver:d,driverKey:h}=n(f);return await c(d,h,a)},getItems:async f=>{const a=new Map,d=new Map,h=[];f.forEach(b=>{let S,R;typeof b=="string"?S=b:"getValue"in b?(S=b.key,R={fallback:b.fallback}):(S=b.key,R=b.options),h.push(S);const{driverArea:C,driverKey:A}=n(S),v=a.get(C)??[];a.set(C,v.concat(A)),d.set(S,R)});const w=new Map;return await Promise.all(Array.from(a.entries()).map(async([b,S])=>{(await t[b].getItems(S)).forEach(C=>{const A=`${b}:${C.key}`,v=d.get(A),O=i(C.value,(v==null?void 0:v.fallback)??(v==null?void 0:v.defaultValue));w.set(A,O)})})),h.map(b=>({key:b,value:w.get(b)}))},getMeta:async f=>{const{driver:a,driverKey:d}=n(f);return await p(a,d)},getMetas:async f=>{const a=f.map(w=>{const b=typeof w=="string"?w:w.key,{driverArea:S,driverKey:R}=n(b);return{key:b,driverArea:S,driverKey:R,driverMetaKey:r(R)}}),d=a.reduce((w,b)=>{var S;return w[S=b.driverArea]??(w[S]=[]),w[b.driverArea].push(b),w},{}),h={};return await Promise.all(Object.entries(d).map(async([w,b])=>{const S=await ce.storage[w].get(b.map(R=>R.driverMetaKey));b.forEach(R=>{h[R.key]=S[R.driverMetaKey]??{}})})),a.map(w=>({key:w.key,meta:h[w.key]}))},setItem:async(f,a)=>{const{driver:d,driverKey:h}=n(f);await m(d,h,a)},setItems:async f=>{const a={};f.forEach(d=>{const{driverArea:h,driverKey:w}=n("key"in d?d.key:d.item.key);a[h]??(a[h]=[]),a[h].push({key:w,value:d.value})}),await Promise.all(Object.entries(a).map(async([d,h])=>{await e(d).setItems(h)}))},setMeta:async(f,a)=>{const{driver:d,driverKey:h}=n(f);await u(d,h,a)},setMetas:async f=>{const a={};f.forEach(d=>{const{driverArea:h,driverKey:w}=n("key"in d?d.key:d.item.key);a[h]??(a[h]=[]),a[h].push({key:w,properties:d.meta})}),await Promise.all(Object.entries(a).map(async([d,h])=>{const w=e(d),b=h.map(({key:A})=>r(A));console.log(d,b);const S=await w.getItems(b),R=Object.fromEntries(S.map(({key:A,value:v})=>[A,o(v)])),C=h.map(({key:A,properties:v})=>{const O=r(A);return{key:O,value:s(R[O]??{},v)}});await w.setItems(C)}))},removeItem:async(f,a)=>{const{driver:d,driverKey:h}=n(f);await y(d,h,a)},removeItems:async f=>{const a={};f.forEach(d=>{let h,w;typeof d=="string"?h=d:"getValue"in d?h=d.key:"item"in d?(h=d.item.key,w=d.options):(h=d.key,w=d.options);const{driverArea:b,driverKey:S}=n(h);a[b]??(a[b]=[]),a[b].push(S),w!=null&&w.removeMeta&&a[b].push(r(S))}),await Promise.all(Object.entries(a).map(async([d,h])=>{await e(d).removeItems(h)}))},clear:async f=>{await e(f).clear()},removeMeta:async(f,a)=>{const{driver:d,driverKey:h}=n(f);await _(d,h,a)},snapshot:async(f,a)=>{var w;const h=await e(f).snapshot();return(w=a==null?void 0:a.excludeKeys)==null||w.forEach(b=>{delete h[b],delete h[r(b)]}),h},restoreSnapshot:async(f,a)=>{await e(f).restoreSnapshot(a)},watch:(f,a)=>{const{driver:d,driverKey:h}=n(f);return T(d,h,a)},unwatch(){Object.values(t).forEach(f=>{f.unwatch()})},defineItem:(f,a)=>{const{driver:d,driverKey:h}=n(f),{version:w=1,migrations:b={}}=a??{};if(w<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const S=async()=>{var Rt;const O=r(h),[{value:j},{value:V}]=await d.getItems([h,O]);if(j==null)return;const H=(V==null?void 0:V.v)??1;if(H>w)throw Error(`Version downgrade detected (v${H} -> v${w}) for "${f}"`);if(H===w)return;console.debug(`[@wxt-dev/storage] Running storage migration for ${f}: v${H} -> v${w}`);const ur=Array.from({length:w-H},(Ae,ve)=>H+ve+1);let X=j;for(const Ae of ur)try{X=await((Rt=b==null?void 0:b[Ae])==null?void 0:Rt.call(b,X))??X}catch(ve){throw new rr(f,Ae,{cause:ve})}await d.setItems([{key:h,value:X},{key:O,value:{...V,v:w}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${f} v${w}`,{migratedValue:X})},R=(a==null?void 0:a.migrations)==null?Promise.resolve():S().catch(O=>{console.error(`[@wxt-dev/storage] Migration failed for ${f}`,O)}),C=new tr,A=()=>(a==null?void 0:a.fallback)??(a==null?void 0:a.defaultValue)??null,v=()=>C.runExclusive(async()=>{const O=await d.getItem(h);if(O!=null||(a==null?void 0:a.init)==null)return O;const j=await a.init();return await d.setItem(h,j),j});return R.then(v),{key:f,get defaultValue(){return A()},get fallback(){return A()},getValue:async()=>(await R,a!=null&&a.init?await v():await c(d,h,a)),getMeta:async()=>(await R,await p(d,h)),setValue:async O=>(await R,await m(d,h,O)),setMeta:async O=>(await R,await u(d,h,O)),removeValue:async O=>(await R,await y(d,h,O)),removeMeta:async O=>(await R,await _(d,h,O)),watch:O=>T(d,h,(j,V)=>O(j??A(),V??A())),migrate:S}}}}function le(t){const e=()=>{if(ce.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(ce.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const r=ce.storage[t];if(r==null)throw Error(`"browser.storage.${t}" is undefined`);return r},n=new Set;return{getItem:async r=>(await e().get(r))[r],getItems:async r=>{const s=await e().get(r);return r.map(i=>({key:i,value:s[i]??null}))},setItem:async(r,s)=>{s==null?await e().remove(r):await e().set({[r]:s})},setItems:async r=>{const s=r.reduce((i,{key:o,value:c})=>(i[o]=c,i),{});await e().set(s)},removeItem:async r=>{await e().remove(r)},removeItems:async r=>{await e().remove(r)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async r=>{await e().set(r)},watch(r,s){const i=o=>{const c=o[r];c!=null&&(Oe(c.newValue,c.oldValue)||s(c.newValue??null,c.oldValue??null))};return e().onChanged.addListener(i),n.add(i),()=>{e().onChanged.removeListener(i),n.delete(i)}},unwatch(){n.forEach(r=>{e().onChanged.removeListener(r)}),n.clear()}}}class rr extends Error{constructor(e,n,r){super(`v${n} migration failed for "${e}"`,r),this.key=e,this.version=n}}const ue=mt.defineItem("local:user",{fallback:{}}),$=mt.defineItem("local:tasks",{fallback:[]}),pt=async t=>{const e=(await ue.getValue()).id;let n=await $.getValue(),r,s,i;if(t&&t.tab_id)i=t.tab_id;else{const c=n.find(p=>p.id===(t.task_id||"0"));c&&c.tab_id!==0&&(i=c.tab_id)}if(i)try{await P.tabs.get(i),r=i}catch{}if(!r){if(n&&n.length>0&&(s=n[0].window_id,s&&s!==0))try{const c=await P.windows.get(s)}catch{s=null}if(s===null||!s){const c=await P.windows.create({type:"normal",state:"normal",focused:t.is_active,url:P.runtime.getURL(`/starttab.html#${e}`)});s=c.id,c.tabs&&c.tabs.length>0&&(r=c.tabs[0].id,n&&n.length>0?(n[0].window_id=s,n[0].tab_id=r):n=[{id:"0",window_id:s,tab_id:r}])}else r=(await P.tabs.create({windowId:s,active:t.is_active,url:P.runtime.getURL("/emptytab.html")})).id}const o=n.findIndex(c=>c.id===(t.task_id||"0"));return o&&(n[o]={...n[o],tab_id:r}),await $.setValue(n),r},sr=async(t,e)=>{const n=await $.getValue();let r=[],s=[],i=1,o={},c={},p;const m=Math.floor(Date.now()/1e3);if(e.length>0&&n.length!==e[0].max_tabs&&e[0].max_tabs!==null){const u=e[0].max_tabs||1;for(let y=0;y<u;y++)n.length>y?o=n[y]:o={id:"0",window_id:0,tab_id:0,last_active:0,max_tabs:u},r.push(o)}else r=n;if(r.forEach(u=>{e.length==0&&t!=="0"&&u.id===t?o={...u,id:"0"}:e.length>0&&u.id===t&&i===1?(i=0,o={...u,id:e[0].id,url:e[0].url,step_pause:e[0].step_pause,last_active:m},c=o):o=u,s.push(o)}),await $.setValue(s),Object.keys(c).length>0){p=await pt({tab_id:c.tab_id,task_id:c.id,is_active:!1});try{await P.tabs.update(p,{url:c.url})}catch(u){console.warn("Error opening URL: ",u)}if(await new Promise(u=>setTimeout(u,c.step_pause)),p){const[u]=await P.scripting.executeScript({target:{tabId:p},function:()=>document.documentElement.outerHTML,world:"ISOLATED"});u&&u.result?await or({id:c.id||"0",html:u.result}):console.warn(`[${p}] Could not retrieve HTML content.`)}}return s},fe=async(t,e)=>{try{const n="https://api.sirius-dev.com"+t,r=await x.post(n,e),{user_id:s,tasks:i}=r.data;if(s&&await ue.setValue({id:s}),i){const o=e&&e.id!=null?e.id:"0";await sr(o,i)}return r.data}catch(n){throw n instanceof Error?new Error(n==null?void 0:n.message):new Error("makeRequest error")}},ir=async()=>{let t=await $.getValue(),e;const n=Math.floor(Date.now()/1e3)-300;if((!t||t.length==0)&&(t=[{id:"0",window_id:0,tab_id:0}],await $.setValue(t)),e=t.find(r=>r.id!=="0"&&r.last_active&&r.last_active<n),e||(e=t.find(r=>r.id==="0")),e){const r={user_id:(await ue.getValue()).id,id:e.id};return await fe("/task/read",r)}},or=async t=>{const e={user_id:(await ue.getValue()).id,id:t.id,html:t.html};await fe("/task/update",e)},wt=.5,ar=Tt(()=>{chrome.runtime.onInstalled.addListener(async({reason:t})=>{await cr()}),chrome.runtime.onStartup.addListener(yt),chrome.runtime.onConnect.addListener(yt),P.alarms.onAlarm.addListener(async t=>{switch(t.name){case"read-tasks":{console.log("reading tasks");try{await ir()}catch(e){console.error("Error while reading tasks: ",e)}break}}}),P.runtime.onMessage.addListener((t,e,n)=>((async()=>{switch(t.type){case"makeRequest":{try{const r=await fe(t.apiPath,t.payload);n(r)}catch(r){console.error("Error executing makeRequest: ",r),n(r)}break}}})(),!0))}),cr=async()=>{P.alarms.create("read-tasks",{periodInMinutes:wt}),await Ot(),pt({is_active:!0})},yt=()=>{P.alarms.create("read-tasks",{periodInMinutes:wt})};function Fr(){}function de(t,...e){}const lr={debug:(...t)=>de(console.debug,...t),log:(...t)=>de(console.log,...t),warn:(...t)=>de(console.warn,...t),error:(...t)=>de(console.error,...t)};let xe;try{xe=ar.main(),xe instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(t){throw lr.error("The background crashed on startup!"),t}return xe}();
background;
